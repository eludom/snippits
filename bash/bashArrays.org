* What
  Functions to perform array operations in bash
* Why
  - I find the native syntax obtuse
  - I like readable, understandable code
  - I'm pretty sure bash is not going again
  - Arrays are useful (well, pretty fundemental) to most code.
  - Learn more bash

* Why not

  From http://robertmuth.blogspot.com/2012/08/better-bash-scripting-in-15-minutes.html

  #+begin_quote
  Signs you should not be using a bash script:
  - your script is longer than a few hundred lines of code
  - you need data structures beyond simple arrays
  - you have a hard time working around quoting issues
  - you do a lot of string manipulation
  - you do not have much need for invoking other programs or pipe-lining them
  - you worry about performance
  #+end_quote

  To which I might add, "You find yourself writing a group of array
  functions to make bash arrays work more like python arrays
  
* Who
  - George Jones <gmj@pobox.com> 
  - Snippits and borrowing from all over, cited.

* When
  <2015-07-30 Thu>

* Where  

* How

  - Define obviously named functions to do array operations
  - See http://rosettacode.org/wiki/Arrays#UNIX_Shell
  - Maybe see http://mywiki.wooledge.org/BashFAQ/006

** Test variable to see if it is an array
  #+begin_src sh  :results output :exports both
  exec 2>&1;set -e; set -u; set +x; echo '#' `date;`


  foo=""
  bar=(baz blort)


  if isArray ; then echo no array is an array; else echo no array is not an array; fi
1
  if isArray foo; then echo foo is an array; else echo foo is not an array; fi

  if isArray bar; then echo bar is an array; else echo bar is not an array; fi
  #+end_src

  #+RESULTS[3566d32379969619b322e3f02b2fd4ee7c6e1552]:
  : # Fri Jul 31 19:49:42 EDT 2015
  : no array is not an array
  : foo is not an array
  : bar is an array

** Create an array
  #+name: createArray
  #+begin_src sh  :results output :exports both
  exec 2>&1;set -e; set -u; set +x; echo '#' `date;`


  echo 
  echo CREATE ARRAYS
  echo 
  arrayCreate qux baz blort bletch  || true
  echo qux is ${qux[@]}

  arrayCreate quux bart || true
  echo quux is ${quux[@]} || true

  arrayCreate quuux  || true
  echo quuux is ${quuux[@]:-''} || true

  #+end_src

  #+RESULTS[922c0b5d1647fdbe8e7a5b91159d1b18a7699c3c]: createArray
  : # Fri Jul 31 20:12:57 EDT 2015
  : 
  : CREATE ARRAYS
  : 
  : qux is baz blort bletch
  : quux is bart
  : quuux is 

  #+begin_src sh  :results output :exports both  
  function isArray {
    name=$1
  }

  #
  # Declare array
  #

  function arrayCreate() {
      # Declare an array
      name=$1
      echo $name
  }

  #
  # Append to an array
  #

  # shell function to append values to an array
  # push LIST VALUES ...
  arrayAppend() {
    # Append to an array
    # http://rosettacode.org/wiki/Arrays#UNIX_Shell
    local var=${1:?'Missing array name!'}
    shift
    eval "\$$var=( \"\${$var[@]}\" \"$@\" )"
  }

  #
  # Prepend to an array
  #

  #
  # test if array contains an element
  # http://stackoverflow.com/questions/3685970/check-if-an-array-contains-a-value

  if 

  #
  # Remove element form an array
  #

  #
  # Split to create an array
  #

  #
  # Join array to create string
  #

  #
  # Delete an array
  #

  #
  # Test
  #

  arrayCreate "foo"

  echo Done.
  #+end_src

  #+RESULTS:
  : # Thu Jul 30 05:24:52 EDT 2015
  : foo
  : Done.



 
